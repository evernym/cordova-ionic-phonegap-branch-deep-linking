{"version":3,"sources":["branch.js"],"names":[],"mappings":"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","file":"branch.js","sourcesContent":["/**\n * Branch.IO SDK\n * -------------\n * Method usage:\n *     All methods are promisified, therefore you can call .then(successCallback, errorCallback) for any of the method\n *     called for executing success or error callbacks.\n */\n\nvar exec = require('cordova/exec');\nvar deviceVendor = window.clientInformation.vendor;\nvar _API_CLASS = 'BranchSDK'; // SDK Class\n\n/**\n * Execute SDK method using cordova.exec()\n *\n * @param  (String) method - The class method to execute.\n * @param  (Array) params  - Method parameter(s) to pass.\n *\n * @return (Promise)\n */\nfunction execute(method, params) {\n\n    params = (!params) ? [] : params;\n\n    return new Promise(function(resolve, reject) {\n        exec(function(res) {\n            resolve(res);\n        }, function(err) {\n            reject(err);\n        }, _API_CLASS, method, params);\n    });\n\n}\n\n/**\n * Set listener callback for SDK method.\n *\n * @param  (String) method      - The class method to execute.\n * @param  (Function) callback  - The method listener callback.\n * @param  (Array) params       - The method listener parameters.\n *\n * @return (Promise)\n */\nfunction executeCallback(method, callback, params) {\n\n    params = (!params) ? [] : params;\n\n    exec(callback, function(err) {\n        console.error(err);\n    }, _API_CLASS, method, params);\n\n}\n\n/**\n * @class Branch\n */\nvar Branch = function() {\n\n    this.debugMode = false;\n\n};\n\n/**\n * Initialize the Branch instance.\n *\n * @return (Promise)\n */\nBranch.prototype.initSession = function() {\n\n    return execute('initSession');\n\n};\n\n/**\n * Get Mixpanel tolen/assisstance.\n * NOTE: This must be called before initSession\n *\n * @param (String) token. Default = false\n *\n * @return (Promise)\n */\nBranch.prototype.setMixpanelToken = function(token) {\n\n    return execute('setMixpanelToken', [ token ]);\n\n};\n\n/**\n * Retrieves the install session parameters.\n *\n * @return (Promise)\n */\nBranch.prototype.getFirstReferringParams = function() {\n\n    return execute('getFirstReferringParams');\n\n};\n\n/**\n * Retrieves the latest referring parameters.\n *\n * @return (Promise)\n */\nBranch.prototype.getLatestReferringParams = function() {\n\n    return execute('getLatestReferringParams');\n\n};\n\n/**\n * Sets the identity of a user and returns the data.\n *\n * @param (String) identity - A unique identifier for the user [REQUIRED]\n *\n * @return (Promise)\n *\n */\nBranch.prototype.setIdentity = function(identity) {\n\n    if (identity) {\n        return execute('setIdentity', [ identity ]);\n    }\n else {\n        return new Promise(function(resolve, reject) {\n            reject('Please set an identity');\n        });\n    }\n\n};\n\n/**\n * Logout from the current session. Replace session and identity IDs.\n *\n * @return (Promise)\n */\nBranch.prototype.logout = function() {\n\n    return execute('logout');\n\n};\n\n/**\n * Register custom events.\n *\n * @param (String) action - Name of the custom action\n * @param (Object) metaData - Data to pass with the action [OPTIONAL]\n *\n * @return (Promise)\n */\nBranch.prototype.userCompletedAction = function(action, metaData) {\n\n    var args = [ action ];\n\n    if (metaData) {\n        args.push(metaData);\n    }\n\n    return execute('userCompletedAction', args);\n\n};\n\n/**\n * Create an universal Branch object\n *\n * @params (Object) options\n *\n * @return (Promise)\n *\n * options:\n *    --------------------------------------------------------------\n *    |          KEY          |    TYPE    |      DESCRIPTION      |\n *    --------------------------------------------------------------\n *    |  canonicalIdentifier  |   String   | The object identifier |\n *    |         title         |   String   |   The object title    |\n *    |  contentDescription   |   String   |  Object description   |\n *    |    contentImageUrl    |   String   |     The image URL     |\n *    |  contentIndexingMode  |   String   |    Indexing Mode      |\n *    |                       |            |('private' or 'public')|\n *    |    contentMetadata    |   Object   |   Custom key/value    |\n *    --------------------------------------------------------------\n */\nBranch.prototype.createBranchUniversalObject = function(options) {\n\n    return new Promise(function(resolve, reject) {\n        execute('createBranchUniversalObject', [ options ]).then(function(res) {\n\n            var obj = {\n                message: res.message,\n                instanceId: res.branchUniversalObjectId\n            };\n\n            // Attach object functions\n            /**\n             * Register view count.\n             *\n             * @return (Promise)\n             */\n            obj.registerView = function() {\n\n                return execute('registerView', [ obj.instanceId ]);\n\n            };\n\n            /**\n             * Generates a short url.\n             *\n             * @param (Object) options\n             * @param (Object) controlParameters\n             *\n             * @return (Promise)\n             *\n             * options:\n             *    --------------------------------------------------\n             *    |    KEY    |    TYPE    |      DESCRIPTION      |\n             *    --------------------------------------------------\n             *    |  feature  |   String   |   The link feature    |\n             *    |   alias   |   String   |    The link alias     |\n             *    |  channel  |   String   |   The link channel    |\n             *    |   stage   |   String   |    The link stage     |\n             *    |  duration |    Int     |   The link duration   |\n             *    --------------------------------------------------\n             *\n             * controlParameters:\n             *    -------------------------------------------------------\n             *    |         KEY        |    TYPE    |    DESCRIPTION    |\n             *    -------------------------------------------------------\n             *    |    $fallback_url   |   String   |   Fallback URL    |\n             *    |    $desktop_url    |   String   |   Desktop URL     |\n             *    |    $android_url    |   String   |   Android URL     |\n             *    |      $ios_url      |   String   |     iOS URL       |\n             *    |      $ipad_url     |   String   |    iPad URL       |\n             *    |      $fire_url     |   String   |  Kindle Fire URL  |\n             *    |  $blackberry_url   |   String   |   Blackberry URL  |\n             *    | $windows_phone_url |   String   |  Kindle Fire URL  |\n             *    -------------------------------------------------------\n             */\n            obj.generateShortUrl = function(options, controlParameters) {\n\n                return execute('generateShortUrl', [ obj.instanceId, options, controlParameters ]);\n\n            };\n\n            /**\n             * Show the share dialog.\n             *\n             * @param (Object) options\n             * @param (Object) controlParameters\n             * @param (String) shareText [OPTIONAL]\n             *\n             * @return (Promise)\n             *\n             * options:\n             *    --------------------------------------------------\n             *    |    KEY    |    TYPE    |      DESCRIPTION      |\n             *    --------------------------------------------------\n             *    |  feature  |   String   |   The link feature    |\n             *    |   alias   |   String   |    The link alias     |\n             *    |  channel  |   String   |   The link channel    |\n             *    |   stage   |   String   |    The link stage     |\n             *    |  duration |    Int     |   The link duration   |\n             *    --------------------------------------------------\n             *\n             * controlParameters:\n             *    -------------------------------------------------------\n             *    |         KEY        |    TYPE    |    DESCRIPTION    |\n             *    -------------------------------------------------------\n             *    |    $fallback_url   |   String   |   Fallback URL    |\n             *    |    $desktop_url    |   String   |   Desktop URL     |\n             *    |    $android_url    |   String   |   Android URL     |\n             *    |      $ios_url      |   String   |     iOS URL       |\n             *    |      $ipad_url     |   String   |    iPad URL       |\n             *    |      $fire_url     |   String   |  Kindle Fire URL  |\n             *    |  $blackberry_url   |   String   |   Blackberry URL  |\n             *    | $windows_phone_url |   String   |  Kindle Fire URL  |\n             *    -------------------------------------------------------\n             */\n            obj.showShareSheet = function(options, controlParameters, shareText) {\n\n                if (!shareText) {\n                    shareText = 'This stuff is awesome: ';\n                }\n\n                return execute('showShareSheet', [ obj.instanceId, options, controlParameters, shareText ]);\n\n            };\n\n            /**\n             * Set on share sheet launched listener callback.\n             *\n             * @param (Function) callback\n             */\n            obj.onShareSheetLaunched = function(callback) {\n\n                if (deviceVendor.indexOf('Apple') < 0) {\n                    executeCallback('onShareLinkDialogLaunched', callback, [ obj.instanceId ]);\n                }\n\n            };\n\n            obj.onShareSheetDismissed = function(callback) {\n\n                executeCallback('onShareLinkDialogDismissed', callback, [ obj.instanceId ]);\n\n            }\n\n            /**\n             * Set on link share listener callback.\n             *\n             * @param (Function) callback\n             */\n            obj.onLinkShareResponse = function(callback) {\n\n                executeCallback('onLinkShareResponse', callback, [ obj.instanceId ]);\n\n            };\n\n            /**\n             * Set on channel select listener callback.\n             *\n             * @param (Function) callback\n             */\n            obj.onChannelSelected = function(callback) {\n\n                if (deviceVendor.indexOf('Apple') < 0) {\n                    executeCallback('onChannelSelected', callback, [ obj.instanceId ]);\n                }\n\n            };\n\n            /**\n             * List item on Spotlight (iOS Only).\n             */\n            obj.listOnSpotlight = function() {\n\n                return execute('listOnSpotlight', [ obj.instanceId ]);\n\n            };\n\n            resolve(obj);\n\n        }, function(err) {\n            reject(err);\n        });\n    });\n\n};\n\n/**\n * Retrieve the current reward balance.\n *\n * @return (Promise)\n */\nBranch.prototype.loadRewards = function(bucket) {\n\n    if (!bucket) {\n        bucket = '';\n    }\n\n    return execute('loadRewards', [ bucket ]);\n\n};\n\n/**\n * Redeem rewards to your account.\n *\n * @param (Int) value - The amount to redeem.\n * @param (String) bucket - The value containing the name of the referral bucket to attempt to redeem credits from. [OPTIONAL]\n *\n * @return (Promise)\n */\nBranch.prototype.redeemRewards = function(value, bucket) {\n\n    var params = [ value ];\n\n    if (bucket) {\n        params.push(bucket);\n    }\n\n    return execute('redeemRewards', params);\n\n};\n\n/**\n * Retrieve the entire history of credits and redemptions from the individual user.\n *\n * @return (Promise)\n */\nBranch.prototype.creditHistory = function() {\n\n    return execute('getCreditHistory');\n\n};\n\n/**\n * NonBranchLinkHandler callback placeholder.\n *\n * @param {String} response\n */\nwindow.NonBranchLinkHandler = (typeof NonBranchLinkHandler === 'undefined') ? function(response) {} : NonBranchLinkHandler;\n\nmodule.exports = new Branch;\n"],"sourceRoot":"/source/"}